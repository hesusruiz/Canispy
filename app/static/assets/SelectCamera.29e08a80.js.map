{"version":3,"file":"SelectCamera.29e08a80.js","sources":["../../src/pages/SelectCamera.js"],"sourcesContent":["import { AbstractPage, register } from '../components/AbstractPage'\nimport { getPreferredVideoDevice } from '../components/camerainfo'\n\nregister(\"SelectCamera\", class SelectCamera extends AbstractPage {\n\n    constructor(id) {\n        super(id)\n    }\n\n    async enter() {\n        let html = this.html\n\n        try {\n            var preferredVideoDevices = await getPreferredVideoDevice()\n            if (preferredVideoDevices.videoDevices.length == 0) {\n                this.render(html`<p>No camera available</p>`)\n                return;\n            }\n    \n            var videoDevices = preferredVideoDevices.videoDevices\n    \n        } catch (error) {\n            this.render(html`<p>No camera available</p>`)\n            return;\n    }\n\n        let theHtml = html`\n        <h2 class=\"text-center text-lg font-semibold my-3\">Select a camera</h2>\n\n        <ul>\n        ${videoDevices.map((camera) =>\n\n            html`\n            <li class=\"mx-4 my-2 shadow-md\">\n                <a @click=${()=>this.setCamera(camera.deviceId)} href=\"javascript:void(0)\">\n                    <div class=\"flex p-3\">\n                    <p class=\"text-lg font-medium\">${camera.label}</p>\n                    </div>\n                </a>\n            </li>`\n            \n            )}\n        </ul>\n\n        `\n        this.render(theHtml)\n    }\n\n    async setCamera(l) {\n        console.log(\"Selecting camera\", l)\n        window.selectedCamera = l\n        localStorage.setItem(\"selectedCamera\", l)\n        window.history.back()\n    }\n\n})\n"],"names":[],"mappings":"uHAGA,EAAS,eAAgB,aAA2B,EAAa,CAE7D,YAAY,EAAI,CACZ,MAAM,QAGJ,QAAQ,CACV,GAAI,GAAO,KAAK,KAEhB,GAAI,CACA,GAAI,GAAwB,KAAM,KAClC,GAAI,EAAsB,aAAa,QAAU,EAAG,CAChD,KAAK,OAAO,+BACZ,OAGJ,GAAI,GAAe,EAAsB,kBAE3C,CACE,KAAK,OAAO,+BACZ,OAGJ,GAAI,GAAU;AAAA;AAAA;AAAA;AAAA,UAIZ,EAAa,IAAI,AAAC,GAEhB;AAAA;AAAA,4BAEgB,IAAI,KAAK,UAAU,EAAO;AAAA;AAAA,qDAED,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UASpD,KAAK,OAAO,QAGV,WAAU,EAAG,CACf,QAAQ,IAAI,mBAAoB,GAChC,OAAO,eAAiB,EACxB,aAAa,QAAQ,iBAAkB,GACvC,OAAO,QAAQ"}